<!DOCTYPE html>
<html lang="fr" class="page">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Interpr√©tation ‚Äì ContextaLingua</title>
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="index.html" class="header-logo">
          <span class="contexta">Contexta</span>
          <span class="lingua">Lingua</span>
        </a>

        <nav class="main-nav">
          <a href="produit.html" class="nav-link nav-public-only">Produit</a>
          <a href="tarifs.html" class="nav-link nav-public-only">Tarifs</a>
          <a href="faq.html" class="nav-link nav-public-only">FAQ</a>

          <a href="index.html" class="nav-link nav-auth-only">Accueil</a>
          <a href="dashboard.html" class="nav-link nav-auth-only">Tableau de bord</a>
          <a href="generate.html" class="nav-link nav-auth-only">R√©daction</a>
          <a href="interpret.html" class="nav-link nav-auth-only active">Interpr√©tation</a>
          <a href="accompanied.html" class="nav-link nav-auth-only">Mode accompagn√©</a>
        </nav>

        <div class="header-actions">
          <span id="headerUserEmail" class="nav-link nav-auth-only"></span>
          <button id="btnLogout" class="btn btn-ghost nav-auth-only">D√©connexion</button>

          <a href="login.html" class="btn btn-ghost nav-public-only js-go-login">Se connecter</a>
          <a href="register.html" class="btn btn-primary nav-public-only js-go-register">Tester gratuitement</a>
        </div>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid hero-grid-simple">
          <div class="card" style="width:100%;">
            <h2 style="margin-bottom:8px;color:var(--text-strong);">
              Camille ‚Äî Interpr√©tation (traduction contextuelle)
            </h2>
            <p style="color:var(--text-muted);font-size:.95rem;margin-bottom:18px;">
              Collez un message re√ßu. Camille d√©tecte automatiquement la langue d‚Äôorigine, traduit (FR par d√©faut) et vous aide √† comprendre.
            </p>

            <!-- Langue cible (r√©ponse) -->
            <div class="form-field">
              <span>Langue de traduction</span>

              <input
                id="intLanguageSearch"
                type="text"
                placeholder="Tapez une langue (ex : Fran√ßais, Chinois, Arabe...) ou cliquez sur un drapeau"
                style="margin-bottom:10px;"
              />

              <input type="hidden" id="intLanguageCode" value="fr" />
              <input type="hidden" id="intLanguageName" value="Fran√ßais" />

              <div
                id="intLanguageGrid"
                style="display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;"
              ></div>

              <p style="margin-top:8px;color:var(--text-muted);font-size:.85rem;">
                S√©lection actuelle : <strong id="intLanguageSelectedLabel">üá´üá∑ Fran√ßais</strong>
                <span style="opacity:.7;"> ‚Äî </span>
                <span style="opacity:.9;">Langue d√©tect√©e :</span>
                <strong id="intDetectedLangLabel">‚Äî</strong>
              </p>
            </div>

            <div class="form-field">
              <span>Niveau de r√©ponse</span>
              <select id="intDepth">
                <option value="quick" selected>Rapide (traduction + micro-analyse)</option>
                <option value="detailed">Approfondi (ton, intention, risques, pistes de r√©ponse)</option>
              </select>
            </div>

            <div class="form-field">
              <span>Texte √† interpr√©ter</span>
              <textarea
                id="intText"
                rows="8"
                placeholder="Collez le mail, le message ou l‚Äôextrait de document √† analyser."
              ></textarea>
            </div>

            <div class="form-field">
              <span>Contexte (optionnel)</span>
              <textarea
                id="intContext"
                rows="3"
                placeholder="Relation, historique, enjeux, objectif, ce que vous voulez √©viter..."
              ></textarea>
            </div>

            <p id="intError" style="color:var(--danger);font-size:.9rem;min-height:1.2em;margin-bottom:8px;"></p>

            <button id="intSubmit" class="btn btn-primary btn-full">Traduire & interpr√©ter</button>

            <!-- R√©sultats -->
            <div class="grid grid-2" style="gap:12px;margin-top:12px;width:100%;">
              <div class="card" style="padding:12px;">
                <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                  <h3 style="margin:0;">Traduction</h3>
                  <button type="button" class="btn btn-ghost" id="btnCopyTranslation">Copier</button>
                </div>
                <pre
                  id="intTranslation"
                  style="white-space:pre-wrap;margin-top:10px;background:#020617;border-radius:12px;padding:12px;border:1px solid var(--border-subtle);min-height:160px;"
                ></pre>
              </div>

              <div class="card" style="padding:12px;">
                <h3 style="margin:0;">Lecture rapide</h3>

                <div style="margin-top:10px;display:flex;flex-direction:column;gap:10px;">
                  <div class="card" style="padding:10px;">
                    <strong>Ton :</strong> <span id="intQuickTone">(non d√©tect√©)</span>
                  </div>
                  <div class="card" style="padding:10px;">
                    <strong>Intention :</strong> <span id="intQuickIntent">(non d√©tect√©e)</span>
                  </div>
                  <div class="card" style="padding:10px;">
                    <strong>Point d‚Äôattention :</strong> <span id="intQuickRisk">(non d√©tect√©)</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- R√©pondre (accordion) -->
            <details id="replyPanel" style="margin-top:12px;">
              <summary style="cursor:pointer;list-style:none;">
                <div class="card" style="padding:12px;display:flex;justify-content:space-between;align-items:center;">
                  <strong>R√©pondre (optionnel)</strong>
                  <span style="color:var(--text-muted);">‚Äî 1 cr√©dit</span>
                </div>
              </summary>

              <div class="card" style="padding:12px;margin-top:10px;">
                <p style="margin-top:0;color:var(--text-muted);font-size:.95rem;">
                  D√©crivez ce que vous souhaitez r√©pondre. Camille g√©n√®re une r√©ponse dans la <strong>langue d‚Äôorigine</strong>,
                  et une <strong>version FR</strong> de contr√¥le.
                </p>

                <div class="form-field">
                  <span>Votre intention de r√©ponse</span>
                  <textarea
                    id="replyIntent"
                    rows="3"
                    placeholder="Ex : remercier, demander une pr√©cision, accepter un rendez-vous..."
                  ></textarea>
                </div>

                <p id="replyError" style="color:var(--danger);font-size:.9rem;min-height:1.2em;margin-bottom:8px;"></p>

                <button id="replySubmit" class="btn btn-secondary">G√©n√©rer une r√©ponse</button>

                <div class="grid grid-2" style="gap:12px;margin-top:12px;">
                  <div class="card" style="padding:12px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                      <strong>R√©ponse (langue d‚Äôorigine)</strong>
                      <button type="button" class="btn btn-ghost" id="btnCopyReplyOrig">Copier</button>
                    </div>
                    <pre
                      id="replyOrig"
                      style="white-space:pre-wrap;margin-top:10px;background:#020617;border-radius:12px;padding:12px;border:1px solid var(--border-subtle);min-height:160px;"
                    ></pre>
                  </div>

                  <div class="card" style="padding:12px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                      <strong>FR (contr√¥le)</strong>
                      <button type="button" class="btn btn-ghost" id="btnCopyReplyFR">Copier</button>
                    </div>
                    <pre
                      id="replyFR"
                      style="white-space:pre-wrap;margin-top:10px;background:#020617;border-radius:12px;padding:12px;border:1px solid var(--border-subtle);min-height:160px;"
                    ></pre>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>¬© ContextaLingua</span>
        <nav class="footer-nav">
          <a href="contact.html">Contact</a>
        </nav>
      </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/interpret.js"></script>
  </body>
</html>
