<!DOCTYPE html>
<html lang="fr" class="page">
  <head>
    <meta charset="UTF-8" />
    <title>R√©daction ‚Äì ContextaLingua</title>
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="index.html" class="header-logo">
          <span class="contexta">Contexta</span>
          <span class="lingua">Lingua</span>
        </a>

        <nav class="main-nav">
          <a href="produit.html" class="nav-link nav-public-only">Produit</a>
          <a href="tarifs.html" class="nav-link nav-public-only">Tarifs</a>
          <a href="faq.html" class="nav-link nav-public-only">FAQ</a>

          <a href="index.html" class="nav-link nav-auth-only">Accueil</a>
          <a href="dashboard.html" class="nav-link nav-auth-only">Tableau de bord</a>
          <a href="generate.html" class="nav-link nav-auth-only active">R√©daction</a>
          <a href="interpret.html" class="nav-link nav-auth-only">Interpr√©tation</a>
          <a href="accompanied.html" class="nav-link nav-auth-only">Mode accompagn√©</a>
        </nav>

        <div class="header-actions">
          <span id="headerUserEmail" class="nav-link nav-auth-only"></span>
          <button id="btnLogout" class="btn btn-ghost nav-auth-only">D√©connexion</button>

          <button class="btn btn-ghost nav-public-only">Se connecter</button>
          <button class="btn btn-primary nav-public-only">Commencer gratuitement</button>
        </div>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid hero-grid-simple">
          <div class="card">
            <h2 style="margin-bottom: 8px; color: var(--text-strong);">
              Camille ‚Äî Mode r√©daction
            </h2>
            <p style="color: var(--text-muted); font-size: 0.95rem; margin-bottom: 18px;">
              Donnez le contexte, l‚Äôobjectif et √©ventuellement un texte brut. Camille r√©dige selon le format choisi.
            </p>

            <form id="generateForm" autocomplete="off">
              <div class="form-field">
                <span>Format du message</span>
                <select id="genFormat">
                  <option value="email">Email</option>
                  <option value="courrier">Courrier formel</option>
                  <option value="telephone">Script t√©l√©phonique</option>
                </select>
              </div>

              <!-- ‚úÖ S√©lecteur langues : recherche + drapeaux + noms complets -->
              <div class="form-field">
                <span>Langue cible</span>

                <input
                  id="genLanguageSearch"
                  type="text"
                  placeholder="Tapez une langue (ex : Chinois, Allemand, Arabe‚Ä¶) ou cliquez sur un drapeau"
                  style="margin-bottom:10px;"
                />

                <!-- Valeur r√©elle envoy√©e (code interne) -->
                <input type="hidden" id="genLanguageCode" value="fr" />
                <!-- Valeur lisible (nom complet) -->
                <input type="hidden" id="genLanguageName" value="Fran√ßais" />

                <div
                  id="genLanguageGrid"
                  style="
                    display:grid;
                    grid-template-columns: repeat(4, minmax(0, 1fr));
                    gap:10px;
                  "
                ></div>

                <p style="margin-top:8px;color:var(--text-muted);font-size:0.85rem;">
                  S√©lection actuelle : <strong id="genLanguageSelectedLabel">üá´üá∑ Fran√ßais</strong>
                </p>
              </div>

              <div class="form-field">
                <span>Ton souhait√©</span>
                <input
                  type="text"
                  id="genTone"
                  placeholder="Ex : professionnel, chaleureux, ferme mais poli‚Ä¶"
                />
              </div>

              <div class="form-field">
                <span>Objectif du message</span>
                <textarea
                  id="genObjective"
                  rows="3"
                  placeholder="Ex : relancer un client en retard, confirmer un RDV, recadrer sans conflit‚Ä¶"
                ></textarea>
              </div>

              <div class="form-field">
                <span>√Ä qui √©crivez-vous ?</span>
                <textarea
                  id="genRecipient"
                  rows="2"
                  placeholder="Ex : dirigeant de PME, client fid√®le mais en retard, fournisseur‚Ä¶"
                ></textarea>
              </div>

              <div class="form-field">
                <span>Texte de d√©part (optionnel)</span>
                <textarea
                  id="genDraft"
                  rows="6"
                  placeholder="Collez ici un texte √† am√©liorer ou laissez vide pour une cr√©ation compl√®te."
                ></textarea>
              </div>

              <div class="form-field">
                <span>Contexte suppl√©mentaire (optionnel)</span>
                <textarea
                  id="genContext"
                  rows="3"
                  placeholder="Historique, contraintes, √©l√©ments √† √©viter, d√©tails de la situation‚Ä¶"
                ></textarea>
              </div>

              <p
                id="genError"
                style="color: var(--danger); font-size: 0.9rem; min-height: 1.2em; margin-bottom: 8px;"
              ></p>

              <button id="genSubmit" type="submit" class="btn btn-primary">
                Lancer la r√©daction
              </button>
            </form>

            <h3 style="margin-top: 22px; margin-bottom: 6px; color: var(--text-strong);">
              Proposition de Camille
            </h3>
            <pre
              id="genOutput"
              style="
                white-space: pre-wrap;
                font-size: 0.95rem;
                color: var(--text-main);
                background:#020617;
                border-radius: 12px;
                padding: 12px;
                border: 1px solid var(--border-subtle);
                min-height: 80px;
              "
            ></pre>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>¬© ContextaLingua</span>
        <nav class="footer-nav">
          <a href="contact.html">Contact</a>
        </nav>
      </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/generate.js"></script>
  </body>
</html>
