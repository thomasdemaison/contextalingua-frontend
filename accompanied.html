<!DOCTYPE html>
<html lang="fr" class="page">
<head>
  <meta charset="UTF-8">
  <title>Mode accompagn√© ‚Äì ContextaLingua</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<header class="site-header">
  <div class="container header-inner">
    <a href="index.html" class="header-logo">
      <span class="contexta">Contexta</span>
      <span class="lingua">Lingua</span>
    </a>

    <!-- Navigation "publique" -->
    <nav class="main-nav" id="publicNav">
      <a href="produit.html" class="nav-link">Produit</a>
      <a href="tarifs.html" class="nav-link">Tarifs</a>
      <a href="faq.html" class="nav-link">FAQ</a>
      <a href="index.html" class="nav-link">Accueil</a>
    </nav>

    <!-- Navigation "outil" (affich√©e si connect√©) -->
    <nav class="main-nav" id="appNav">
      <a href="dashboard.html" class="nav-link" data-nav="dashboard">Tableau de bord</a>
      <a href="generate.html" class="nav-link" data-nav="generate">R√©daction</a>
      <a href="interpret.html" class="nav-link" data-nav="interpret">Interpr√©tation</a>
      <a href="accompanied.html" class="nav-link active" data-nav="accompanied">Mode accompagn√©</a>
    </nav>

    <div class="header-actions">
      <span id="headerUserEmail" class="nav-link"></span>
      <button id="headerLoginBtn" class="btn btn-ghost">Se connecter</button>
      <button id="headerLogoutBtn" class="btn btn-secondary" style="display:none;">D√©connexion</button>
      <button id="headerCtaBtn" class="btn btn-primary">Commencer gratuitement</button>
    </div>
  </div>
</header>

<main class="page">
  <section class="hero">
    <div class="container hero-grid">
      <!-- Colonne gauche : assistant pas √† pas -->
      <div class="card" style="display:flex;flex-direction:column;gap:18px;min-height:420px;">
        <div>
          <h1 style="font-size:1.6rem;margin-bottom:4px;color:var(--text-strong);">
            Mode accompagn√©
          </h1>
          <p style="color:var(--text-muted);font-size:0.95rem;">
            Camille vous guide √©tape par √©tape. Choisissez d‚Äôabord si vous souhaitez
            <strong>r√©diger</strong> un message ou <strong>comprendre</strong> un message re√ßu,
            puis r√©pondez aux questions. Le brief est construit en temps r√©el.
          </p>
        </div>

        <!-- Choix du but -->
        <div>
          <span class="eyebrow light">√âtape 0 ¬∑ Objectif</span>
          <p style="color:var(--text-muted);font-size:0.9rem;margin-bottom:8px;">
            Que voulez-vous faire ?
          </p>

          <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:8px;">
            <button id="acModeWriteBtn" type="button" class="btn btn-primary">
              ‚úç √âcrire / reformuler un message
            </button>
            <button id="acModeInterpretBtn" type="button" class="btn btn-secondary">
              üîé Comprendre / interpr√©ter un message
            </button>
          </div>
        </div>

        <!-- Zone du parcours -->
        <div style="flex:1;display:flex;flex-direction:column;gap:10px;">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <span class="eyebrow light" id="acStepLabel">√âtape 1</span>
              <h2 id="acStepTitle" style="font-size:1.15rem;color:var(--text-strong);margin-top:4px;">
                Contexte g√©n√©ral
              </h2>
            </div>
            <div style="font-size:0.85rem;color:var(--text-muted);" id="acStepProgress">
              √âtape 1 / 4
            </div>
          </div>

          <p id="acStepSubtitle" style="color:var(--text-muted);font-size:0.9rem;"></p>

          <div id="acStepBody" style="margin-top:10px;display:flex;flex-direction:column;gap:10px;">
            <!-- Les questions de l‚Äô√©tape courante sont inject√©es ici par JS -->
          </div>
        </div>

        <!-- Navigation d‚Äô√©tapes -->
        <div style="display:flex;justify-content:space-between;gap:12px;margin-top:8px;">
          <button id="acPrevBtn" type="button" class="btn btn-secondary" style="min-width:120px;">
            ‚Üê √âtape pr√©c√©dente
          </button>

          <div style="display:flex;gap:10px;">
            <button id="acNextBtn" type="button" class="btn btn-primary" style="min-width:130px;">
              √âtape suivante ‚Üí
            </button>
            <button id="acLaunchBtn" type="button" class="btn btn-primary" style="display:none;min-width:190px;">
              Lancer avec Camille
            </button>
          </div>
        </div>

        <p id="acHelperMessage" style="font-size:0.85rem;color:var(--text-muted);margin-top:4px;">
          Vous pouvez revenir en arri√®re √† tout moment : le r√©capitulatif √† droite se met √† jour automatiquement.
        </p>
      </div>

      <!-- Colonne droite : r√©sum√© pour Camille -->
      <aside class="card" style="display:flex;flex-direction:column;gap:14px;max-height:600px;">
        <div style="display:flex;align-items:center;gap:10px;">
          <div style="width:40px;height:40px;border-radius:999px;overflow:hidden;background:#020617;">
            <!-- Suggestion : utilisez une image portrait de Camille ici -->
            <img src="assets/img/camille1.png"
                 alt="Camille, votre assistante linguistique"
                 style="width:100%;height:100%;object-fit:cover;">
          </div>
          <div>
            <h2 style="font-size:1rem;color:var(--text-strong);margin-bottom:2px;">
              Brief pr√™t pour Camille
            </h2>
            <p style="font-size:0.85rem;color:var(--text-muted);">
              Ce r√©sum√© se construit √† partir de vos r√©ponses. Il servira de base √† la r√©daction
              ou √† l‚Äôinterpr√©tation.
            </p>
          </div>
        </div>

        <textarea id="acSummary"
                  readonly
                  style="flex:1;min-height:260px;background:#020617;border-radius:12px;border:1px solid var(--border-subtle);padding:10px;color:var(--text-main);font-size:0.9rem;resize:vertical;"></textarea>

        <button id="acCopyBtn" type="button" class="btn btn-secondary btn-full">
          Copier le brief dans le presse-papiers
        </button>

        <p style="font-size:0.85rem;color:var(--text-muted);">
          Lorsque vous cliquerez sur <strong>Lancer avec Camille</strong>, le brief sera √©galement copi√©
          dans votre presse-papiers, puis vous serez redirig√© vers la page
          <strong>R√©daction</strong> ou <strong>Interpr√©tation</strong>.  
          Vous pourrez encore l‚Äôajuster avant d‚Äôenvoyer la requ√™te d‚ÄôIA.
        </p>

        <p id="acStatusMessage" style="font-size:0.85rem;min-height:1.2em;"></p>
      </aside>
    </div>
  </section>
</main>

<footer class="site-footer">
  <div class="container footer-inner">
    <span>¬© ContextaLingua</span>
    <nav class="footer-nav">
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</footer>

<!-- Scripts communs -->
<script src="js/api.js"></script>
<script src="js/auth.js"></script>
<!-- Script sp√©cifique mode accompagn√© -->
<script src="js/accompanied.js"></script>
</body>
</html>
